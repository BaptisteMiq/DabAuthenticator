class DABAuthenticator{constructor(){this.points=Array(17),this.poses=[],this.intervalCheck=null,this.createVideoElement()}createVideoElement(){this.vidEl=document.createElement("video"),this.vidEl.setAttribute("width",640),this.vidEl.setAttribute("height",480),this.vidEl.setAttribute("autoplay",!0),this.vidEl.setAttribute("hidden",!0),document.body.appendChild(this.vidEl)}login(){return new Promise((t,e)=>{var i=this;navigator.mediaDevices&&navigator.mediaDevices.getUserMedia&&navigator.mediaDevices.getUserMedia({video:!0}).then(function(e){i.vidEl.srcObject=e,i.vidEl.play(),ml5.poseNet(i.vidEl,i.modelReady).on("pose",t=>{i.gotPoses(t,i)}),t(i)})})}detect(){var t=this;return new Promise((e,i)=>{setInterval(function(){t.poses.length>0&&t.isDabbing()&&(t.vidEl.play(),t.vidEl.srcObject.getTracks()[0].stop(),e(t))},100)})}modelReady(){}isHeadTiltedRight(){return this.points[2].pos.y>this.points[1].pos.y&&this.points[1].pos.y>this.points[3].pos.y}areHarmsTilted(){return this.points[6].pos.y>this.points[10].pos.y&&this.points[10].pos.y>this.points[5].pos.y}isDabbing(){return this.isHeadTiltedRight()&&this.areHarmsTilted()}gotPoses(t,e){e.poses=t,t.length>0&&t[0].pose.keypoints.forEach((t,i)=>{e.points[i]={pos:t.position,index:i}})}}
